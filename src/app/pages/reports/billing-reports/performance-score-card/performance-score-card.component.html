<section class="w-full m-2 shadow-md bg-white p-3 flex flex-col justify-start items-start gap-2 rounded-lg">
  <div class="w-full flex justify-between items-center">
    <h3 class="m-0 my-auto text-[#6366F1] font-medium font-sans">Performance Score Card</h3>
    <div class="flex flex-row gap-2 items-center">
      <div class="flex flex-row gap-y-4 gap-x-3 items-center justify-end">
        <p-multiSelect
          [options]="months"
          [(ngModel)]="selectedMonths"
          placeholder="Select Month(s)"
          display="chip"
          class="multiselect"
        ></p-multiSelect>
        <p-dropdown [options]="years" [(ngModel)]="selectedYear" placeholder="Select Year"></p-dropdown>
        <p-dropdown [options]="practices" [(ngModel)]="selectedPractice" placeholder="Select Practice"></p-dropdown>
        <p-button class="text-[#6366F1] filterBtn" label="Filter" (onClick)="filterPerformanceData()"></p-button>
      </div>
      <p-button icon="pi pi-download text-[#6366F1]" class="p-button-rounded btn p-button-text p-button-lg"></p-button>
    </div>
  </div>
  <div class="w-full mt-1"></div>

  <div class="w-full mt-2">
    <p-table [value]="filteredPerformanceData" [responsiveLayout]="'scroll'" class="bordered-table">
      <ng-template pTemplate="header">
        <tr>
          <th rowspan="2">Practice</th>
          <th colspan="2" class="text-center">Week 1</th>
          <th colspan="2" class="text-center">Week 2</th>
          <th colspan="2" class="text-center">Week 3</th>
          <th colspan="2" class="text-center">Week 4</th>
          <th colspan="2" class="text-center">Monthly Total</th>
          <th rowspan="2">Conversion Rate</th>
        </tr>
        <tr>
          <th>Referrals</th>
          <th>Admitted</th>
          <th>Referrals</th>
          <th>Admitted</th>
          <th>Referrals</th>
          <th>Admitted</th>
          <th>Referrals</th>
          <th>Admitted</th>
          <th>Referrals</th>
          <th>Admitted</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-rowData>
        <tr>
          <td>{{ rowData.practice }}</td>
          <td class="text-center">{{ rowData.week1.referrals }}</td>
          <td class="text-center">{{ rowData.week1.admitted }}</td>
          <td class="text-center">{{ rowData.week2.referrals }}</td>
          <td class="text-center">{{ rowData.week2.admitted }}</td>
          <td class="text-center">{{ rowData.week3.referrals }}</td>
          <td class="text-center">{{ rowData.week3.admitted }}</td>
          <td class="text-center">{{ rowData.week4.referrals }}</td>
          <td class="text-center">{{ rowData.week4.admitted }}</td>
          <td class="text-center">{{ rowData.monthlyTotal.referrals }}</td>
          <td class="text-center">{{ rowData.monthlyTotal.admitted }}</td>
          <td class="text-center">{{ rowData.conversionRate }}</td>
        </tr>
      </ng-template>
      <ng-template pTemplate="footer">
        <tr class="font-bold">
          <td>Total</td>
          <td class="text-center">{{ totalReferralsWeek1 }}</td>
          <td class="text-center">{{ totalAdmittedWeek1 }}</td>
          <td class="text-center">{{ totalReferralsWeek2 }}</td>
          <td class="text-center">{{ totalAdmittedWeek2 }}</td>
          <td class="text-center">{{ totalReferralsWeek3 }}</td>
          <td class="text-center">{{ totalAdmittedWeek3 }}</td>
          <td class="text-center">{{ totalReferralsWeek4 }}</td>
          <td class="text-center">{{ totalAdmittedWeek4 }}</td>
          <td class="text-center">{{ totalMonthlyReferrals }}</td>
          <td class="text-center">{{ totalMonthlyAdmitted }}</td>
          <td></td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</section>
